# 🚀 快速启动步骤

## ✅ 系统状态检查结果

根据诊断工具检查，您的系统状态：

- ✅ Python 3.10.11 - 版本正常
- ✅ 所有依赖包已安装
- ✅ 数据库文件存在（0.77 MB）
- ✅ 配置文件正常
- ✅ 代码语法检查通过
- ⚠️ **端口8000已被占用**（但服务器未响应）

## 🔧 问题解决

**端口8000被占用，但服务器未响应**，可能的原因：
1. 服务器启动时遇到错误并崩溃
2. 端口被其他程序占用
3. 服务器进程卡死

## 📋 解决步骤

### 方法1：停止旧进程并重启（推荐）

#### 步骤1：查找占用端口的进程
```powershell
netstat -ano | findstr :8000
```

#### 步骤2：停止进程
找到进程ID（PID）后，运行：
```powershell
taskkill /PID [进程ID] /F
```

#### 步骤3：重新启动服务器
```powershell
python run_server.py
```

### 方法2：使用安全启动脚本（推荐）

运行带检查的启动脚本：
```powershell
python start_server_safe.py
```

这个脚本会：
1. ✅ 检查语法
2. ✅ 检查数据库目录
3. ✅ 检查配置
4. ✅ 然后启动服务器

### 方法3：修改端口（如果无法停止占用进程）

1. 编辑 `src/config.py`
2. 将 `PORT = 8000` 改为其他端口（如 `PORT = 8001`）
3. 重新启动服务器

## ✅ 验证服务器启动

### 方法1：浏览器访问
打开浏览器访问：http://localhost:8000/docs

如果能看到API文档页面，说明服务器运行正常。

### 方法2：运行测试脚本
```powershell
python run_complete_test.py
```

预期看到：
```
测试完成: 12/12 通过
[OK] 所有API测试通过！
```

### 方法3：检查健康检查API
```powershell
curl http://localhost:8000/api/v1/health
```

或者用浏览器访问：http://localhost:8000/api/v1/health

## 🎯 启动成功的标志

当您看到以下信息时，说明服务器启动成功：

```
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

**注意**：看到 "Application startup complete" 是关键！

## 📝 启动后测试清单

- [ ] 服务器启动成功（看到 Application startup complete）
- [ ] API文档可访问（http://localhost:8000/docs）
- [ ] 健康检查API正常（http://localhost:8000/api/v1/health）
- [ ] 运行测试脚本：12/12 通过
- [ ] 前端可以访问（如已启动前端服务）

## ⚠️ 如果启动失败

### 查看错误信息
1. 查看终端中的错误信息
2. 特别关注 "SyntaxError"、"ImportError"、"ModuleNotFoundError" 等

### 常见错误及解决

#### 1. SyntaxError（语法错误）
- **已修复**：src/main.py 第787行的引号问题已修复
- **如果还有其他语法错误**：查看错误信息中的行号，检查该行代码

#### 2. ModuleNotFoundError（模块未找到）
- **解决**：运行 `pip install -r requirements.txt`

#### 3. 端口被占用
- **解决**：停止占用端口的程序，或修改端口

#### 4. 数据库错误
- **解决**：确保 `data` 目录存在，服务器会自动创建数据库

## 📞 获取帮助

如果遇到问题，请：
1. 运行诊断工具：`python diagnose_and_start.py`
2. 查看错误信息
3. 检查上述常见问题

---

**提示**：启动服务器后，保持该终端窗口运行，不要关闭。

